<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <title>Test page</title>
    <style>
    section>ul>li {
        display: inline-block;
        vertical-align: top;
        outline: 1px solid #ccc;
        margin:5px;
        padding: 5px;
    }
    section>ul>li>ul {
        padding: 0 0 0 20px;
    }
    section>ul>li>div {
        background: #efefef;
        width: 400px;
        overflow: hidden;
    }
    section>ul>li>div>code {
        white-space: pre-wrap;
    }
    </style>
</head>
<body>
    <section>
        <h2>Manager</h2>
        <ul>
            <li>
                <% if (typeof params.session.managerInfo !== 'undefined') { %>
                    Logged in as : <%= params.session.managerInfo.firstName %> <%= params.session.managerInfo.lastName %>
                <% } else { %>
                    Not logged in
                <% } %>
                <hr>
                <h3>Login</h3>
                <form action="/api/manager/login" method="POST">
                    <ul>
                        <li>
                            <label>email</label>
                            <input type="text" name="email" />
                        </li>
                        <li>
                            <label>password</label>
                            <input type="password" name="password" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
                <hr>
                <h3>Logout</h3>
                <a href="/api/manager/logout">Click to logout</a>
            </li>
            <li>
                <h3>Activate</h3>
                <form action="/api/manager/activate" method="POST">
                    <ul>
                        <li>
                            <label>new password</label>
                            <input type="password" name="password" />
                        </li>
                        <li>
                            <label>confirm password</label>
                            <input type="password" name="confirmPassword" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
                <hr>
                <h3>Reissue password</h3>
                <ul>
                    <% for (var i = 0; i < params.managers.length; i += 1) { %>
                        <li>
                            <a href="/manager/reissuePassword/<%= params.managers[i].id %>">
                                <%= params.managers[i].id %> - <%= params.managers[i].firstName %> <%= params.managers[i].lastName %>
                            </a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Create</h3>
                <form action="/api/manager/create" method="POST">
                    <ul>
                        <li>
                            <label>Email</label>
                            <input type="text" name="email" />
                        </li>
                        <li>
                            <label>Phone</label>
                            <input type="text" name="phone" />
                        </li>
                        <li>
                            <label>FirstName</label>
                            <input type="text" name="firstName" />
                        </li>
                        <li>
                            <label>LastName</label>
                            <input type="text" name="lastName" />
                        </li>
                        <li>
                            <label>Street</label>
                            <input type="text" name="street" />
                        </li>
                        <li>
                            <label>district</label>
                            <input type="text" name="district" />
                        </li>
                        <li>
                            <label>city</label>
                            <input type="text" name="city" />
                        </li>
                        <li>
                            <label>county</label>
                            <input type="text" name="county" />
                        </li>
                        <li>
                            <label>Country</label>
                            <input type="text" name="country" />
                        </li>
                        <li>
                            <label>zip</label>
                            <input type="text" name="zip" />
                        </li>
                        <li>
                            <label>password</label>
                            <input type="password" name="password" />
                        </li>
                        <li>
                            <label>Confirm password</label>
                            <input type="password" name="confirmPassword" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>Get info</h3>
                <ul>
                    <% for (var i = 0; i < params.managers.length; i += 1) { %>
                        <li>
                            <label><%= params.managers[i].id %> - <%= params.managers[i].firstName %> <%= params.managers[i].lastName %>:</label> 
                            <a href="/manager/info/<%= params.managers[i].id %>">General</a>
                            <a href="/manager/mgmtInfo/<%= params.managers[i].id %>">Management</a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Update</h3>
                <ul>
                    <% for (var i = 0; i < params.managers.length; i += 1) { %>
                        <li>
                            <label>
                            <a href="/manager/update/<%= params.managers[i].id %>"><%= params.managers[i].id %> - <%= params.managers[i].firstName %> <%= params.managers[i].lastName %>:</label> </a>
                        </li>
                    <% } %>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h2>Racer</h2>
        <ul>
            <li>
                <h3>Create</h3>
                <form action="/api/racer/create" method="POST">
                    <ul>
                        <li>
                            <label>Email</label>
                            <input type="text" name="email" />
                        </li>
                        <li>
                            <label>Phone</label>
                            <input type="text" name="phone" />
                        </li>
                        <li>
                            <label>FirstName</label>
                            <input type="text" name="firstName" />
                        </li>
                        <li>
                            <label>LastName</label>
                            <input type="text" name="lastName" />
                        </li>
                        <li>
                            <label>birthday</label>
                            <input type="date" name="birthday" />
                        </li>
                        <li>
                            <label>ID Number</label>
                            <input type="text" name="idNumber" />
                        </li>
                        <li>
                            <label>Street</label>
                            <input type="text" name="street" />
                        </li>
                        <li>
                            <label>district</label>
                            <input type="text" name="district" />
                        </li>
                        <li>
                            <label>city</label>
                            <input type="text" name="city" />
                        </li>
                        <li>
                            <label>county</label>
                            <input type="text" name="county" />
                        </li>
                        <li>
                            <label>Country</label>
                            <input type="text" name="country" />
                        </li>
                        <li>
                            <label>zip</label>
                            <input type="text" name="zip" />
                        </li>
                        <li>
                            <label>password</label>
                            <input type="password" name="password" />
                        </li>
                        <li>
                            <label>Confirm password</label>
                            <input type="password" name="confirmPassword" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>Get info</h3>
                <ul>
                    <% for (var i = 0; i < params.racers.length; i += 1) { %>
                        <li>
                            <label><%= params.racers[i].id %> - <%= params.racers[i].firstName %> <%= params.racers[i].lastName %>:</label> 
                            <a href="/racer/info/<%= params.racers[i].id %>">General</a>
                            <a href="/racer/mgmtInfo/<%= params.racers[i].id %>">Management</a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Update</h3>
                <ul>
                    <% for (var i = 0; i < params.racers.length; i += 1) { %>
                        <li>
                            <label>
                            <a href="/racer/update/<%= params.racers[i].id %>"><%= params.racers[i].id %> - <%= params.racers[i].firstName %> <%= params.racers[i].lastName %>:</label> </a>
                        </li>
                    <% } %>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h2>Event</h2>
        <ul>
            <li>
                <h3>Create</h3>
                <%
                    var timestamp = Date.now();
                    var timestampStart = timestamp + (2 * 3600 * 1000);
                    var timestampEnd = timestampStart + 8 * 3600 * 1000;
                    var returnDate = function (timestamp) {
                        var date = new Date(timestamp);
                        var yyyy = date.getFullYear();
                        var MM = date.getMonth() + 1;
                        var dd = date.getDate();
                        var hh = date.getHours();
                        var mm = date.getMinutes();
                        return yyyy + '-' + MM + '-' + dd + ' ' + hh + ':' + mm + ':00';
                    };
                    var now = returnDate(timestamp);
                    var startdate = returnDate(timestampStart);
                    var enddate = returnDate(timestampEnd);
                %>
                <p>Current time: <%= now %></p>
                <form action="/api/event/create" method="POST">
                    <ul>
                        <li>
                            <label>Name</label>
                            <input type="text" name="name" />
                        </li>
                        <li>
                            <label>Chinese Name</label>
                            <input type="text" name="nameCht" />
                        </li>
                        <li>
                            <label>assignedRaceNumber</label>
                            <input type="number" name="assignedRaceNumber" />
                        </li>
                        <li>
                            <label>Start time</label>
                            <input type="datetime-local" name="startTime" />
                        </li>
                        <li>
                            <label>End time</label>
                            <input type="datetime-local" name="endTime" />
                        </li>
                        <li>
                            <label>Lap Distance (meter)</label>
                            <input type="number" name="lapDistance" />
                        </li>
                        <li>
                            <label>Location</label>
                            <input type="text" name="location" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>Get info</h3>
                <ul>
                    <% for (var i = 0; i < params.events.length; i += 1) { %>
                        <li><%= params.events[i].id %> - <%= params.events[i].name %> -
                            <a href="/event/info/<%= params.events[i].id %>">General Info</a>
                            <a href="/event/getGroupsAndRacersOfEvent/<%= params.events[i].id %>">Groups and Racers%></a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Update-related</h3>
                <ul>
                    <% for (var i = 0; i < params.events.length; i += 1) { %>
                        <li>
                            <a href="/event/update/<%= params.events[i].id %>"><%= params.events[i].id %> - <%= params.events[i].name %></a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Delete</h3>
                <ul>
                    <% for (var i = 0; i < params.events.length; i += 1) { %>
                        <li>
                            <a href="/event/delete/<%= params.events[i].id %>"><%= params.events[i].id %> - <%= params.events[i].name %></a>
                        </li>
                    <% } %>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h2>Group</h2>
        <ul>
            <li>
                <h3>Create</h3>

                <form action="/api/group/create" method="POST">
                    <ul>
                        <li>
                            <label>Event</label>
                            <input type="number" name="event" />
                        </li>
                        <li>
                            <label>Name</label>
                            <input type="text" name="name" />
                        </li>
                        <li>
                            <label>Chinese Name</label>
                            <input type="text" name="nameCht" />
                        </li>
                        <li>
                            <label>Rules</label>
                            <textarea type="text" name="rules"></textarea>
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>Get info</h3>
                <ul>
                    <% for (var i = 0; i < params.groups.length; i += 1) { %>
                        <li>
                            <a href="/group/info/<%= params.groups[i].id %>"><%= params.groups[i].id %> - <%= params.groups[i].name %></a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Update</h3>
                <ul>
                    <% for (var i = 0; i < params.groups.length; i += 1) { %>
                        <li>
                            <a href="/group/update/<%= params.groups[i].id %>"><%= params.groups[i].id %> - <%= params.groups[i].name %></a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Delete</h3>
                <ul>
                    <% for (var i = 0; i < params.groups.length; i += 1) { %>
                        <li>
                            <a href="/group/delete/<%= params.groups[i].id %>"><%= params.groups[i].id %> - <%= params.groups[i].name %></a>
                        </li>
                    <% } %>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h2>Race</h2>
        <ul>
            <li>
                <h3>Create</h3>

                <form action="/api/race/create" method="POST">
                    <ul>
                        <li>
                            <label>Group</label>
                            <input type="number" name="group" />
                        </li>
                        <li>
                            <label>Name</label>
                            <input type="text" name="name" />
                        </li>
                        <li>
                            <label>Name Cht</label>
                            <input type="text" name="nameCht" />
                        </li>
                        <li>
                            <label>Laps</label>
                            <input type="number" name="laps" />
                        </li>
                        <li>
                            <label>racerNumberAllowed</label>
                            <input type="number" name="racerNumberAllowed" />
                        </li>
                        <li>
                            <label>advancingRules:</label>
                            <ul>
                                <li>Rank from: <input type="number" name="advancingRules[][rankFrom]" /></li>
                                <li>Rank to: <input type="number" name="advancingRules[][rankTo]" /></li>
                                <li>to Race: <input type="number" name="advancingRules[][toRace]" /></li>
                                <li>insertAt: <input type="number" name="advancingRules[][insertAt]" /></li>
                            </ul>
                        </li>
                        <li>
                            <label>requirePacer</label>
                            <input type="checkbox" name="requirePacer" />
                        </li>
                        <li>
                            <label>isEntryRace</label>
                            <input type="checkbox" name="isEntryRace" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>Get info</h3>
                <ul>
                    <% for (var i = 0; i < params.races.length; i += 1) { %>
                        <li>
                            <label><%= params.races[i].id %> - <%= params.races[i].name %>:</label>
                            <a href="/race/info/<%= params.races[i].id %>">General</a>
                            <a href="/race/mgmtInfo/<%= params.races[i].id %>">Management</a>
                            <a href="/race/getParsedRaceResult/<%= params.races[i].id %>">Parsed race result</a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Update</h3>
                <ul>
                    <% for (var i = 0; i < params.races.length; i += 1) { %>
                        <li>
                            <a href="/race/update/<%= params.races[i].id %>"><%= params.races[i].id %> - <%= params.races[i].name %></a>
                        </li>
                    <% } %>
                </ul>
            </li>
            <li>
                <h3>Delete</h3>
                <ul>
                    <% for (var i = 0; i < params.races.length; i += 1) { %>
                        <li>
                            <a href="/race/delete/<%= params.races[i].id %>"><%= params.races[i].id %> - <%= params.races[i].name %></a>
                        </li>
                    <% } %>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h2>Registration</h2>
        <ul>
            <li>
                <h3>signupAndCreateMultiple</h3>
                <form action="/api/reg/signupAndCreateMultiple" method="POST">
                    <ul>
                        <li>
                            <label>Event</label>
                            <input type="number" name="event" />
                        </li>
                        <li>
                            <label>Group</label>
                            <input type="number" name="group" />
                        </li>
                        <li>
                            <label>Team</label>
                            <ul>
                                <li>
                                    <label>Name: </label><input type="text" name="team[name]" />
                                </li>
                                <li>
                                    <label>Desc: </label><input type="text" name="team[description]" />
                                </li>
                                <li>
                                    <label>url: </label><input type="text" name="team[url]" />
                                </li>
                            </ul>
                        </li>
                        <li>
                            <label>Racers</label>
                            <ol>
                                <% for (var i = 0; i < 2; i += 1) { %>
                                    <li>
                                        <ul>
                                            <li>
                                                <label>email: </label><input type="text" name="racers[<%= i %>][email]" />
                                            </li>
                                            <li>
                                                <label>phone: </label><input type="text" name="racers[<%= i %>][phone]" />
                                            </li>
                                            <li>
                                                <label>firstName: </label><input type="text" name="racers[<%= i %>][firstName]" />
                                            </li>
                                            <li>
                                                <label>lastName: </label><input type="text" name="racers[<%= i %>][lastName]" />
                                            </li>
                                            <li>
                                                <label>nickName: </label><input type="text" name="racers[<%= i %>][nickName]" />
                                            </li>
                                            <li>
                                                <label>Birthday: </label><input type="text" name="racers[<%= i %>][birthday]" />
                                            </li>
                                            <li>
                                                <label>idNumber: </label><input type="text" name="racers[<%= i %>][idNumber]" />
                                            </li>
                                        </ul>
                                    </li>
                                <% } %>
                            </ol>
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>Get info</h3>
                <form action="/api/reg/info" method="POST">
                    <ul>
                        <li>
                            <label>event: </label><input type="number" name="event" /> (required)
                        </li>
                        <li>
                            <label>racer id: </label><input type="number" name="racer" />
                        </li>
                        <li>
                            <label>accessCode: </label><input type="text" name="accessCode" />
                        </li>
                        <li>
                            <label>raceNumber: </label><input type="number" name="raceNumber" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>Assign RFID</h3>
                <form action="/api/reg/assignRfid" method="POST">
                  <ul>
                      <li>
                          <label>event: </label><input type="number" name="event" />
                      </li>
                      <li>
                          <label>Access code: </label><input type="text" name="accessCode" />
                      </li>
                      <li>
                          <label>epc: </label><input type="text" name="epc" />
                      </li>
                  </ul>
                  <button type="submit">Submit</button>
                </form>
                <hr>
                <h3>Replace RFID</h3>
                <form action="/api/reg/replaceRfid" method="POST">
                  <ul>
                      <li>
                          <label>event: </label><input type="number" name="event" />
                      </li>
                      <li>
                          <label>Race number: </label><input type="number" name="raceNumber" />
                      </li>
                      <li>
                          <label>epc: </label><input type="text" name="epc" />
                      </li>
                  </ul>
                  <button type="submit">Submit</button>
                </form>
                <hr>
                <h3>Recycle RFID</h3>
                <form action="/api/reg/recycleRfid" method="POST">
                  <ul>
                      <li>
                          <label>epc: </label><input type="text" name="epc" />
                      </li>
                  </ul>
                  <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>admitRacer</h3>
                <form action="/api/reg/admitRacer" method="POST">
                    <ul>
                        <li>
                            <label>Race: </label><input type="number" name="race" />
                        </li>
                        <li>
                            <label>epc: </label><input type="text" name="epc" />
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
            <li>
                <h3>updateRaceNote</h3>
                <form action="/api/reg/updateRaceNote" method="POST">
                    <ul>
                        <li>
                            <label>Race: </label><input type="number" name="race" />
                        </li>
                        <li>
                            <label>registration: </label><input type="number" name="registration" />
                        </li>
                        <li>
                            <label>note: </label><textarea type="number" name="note"></textarea>
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
                <hr>
                <h3>updateDisqualification</h3>
                <form action="/api/reg/updateDisqualification" method="POST">
                    <ul>
                        <li>
                            <label>Race: </label><input type="number" name="race" />
                        </li>
                        <li>
                            <label>registration: </label><input type="number" name="registration" />
                        </li>
                        <li>
                            <label>note: </label><textarea type="number" name="note"></textarea>
                        </li>
                        <li>
                            <input type="checkbox" name="isDisqualified" /><label>is disqualified</label>
                        </li>
                    </ul>
                    <button type="submit">Submit</button>
                </form>
            </li>
        </ul>
    </section>
    <script>
    var params = <%- JSON.stringify(params, null, 4) %></script>
</body>
</html>